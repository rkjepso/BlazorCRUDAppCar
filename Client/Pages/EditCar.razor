@page "/editperson/{Id}"
@inherits BasePage;

<MyStyle></MyStyle>

<style>


</style>

<h2>Edit Car</h2>
@if(car != null)
{
    <div class="row" >
        <label class="ml">Brand* </label> <input class="mi" @bind=@car.Brand />
        <label class="ml">Model *</label> <input class="mi" @bind=@car.Model />
        <label class="ml">Year</label>    <input class="mi" @bind=@car.Year />
        <label class="ml">Price</label>   <input class="mi" @bind=@car.Price />
    </div>
    <img class="imgcar" src=@CarViewModel.GetImg(car)/>
}

<div class="row">
    <button class="button" @onclick="@Save">Save</button>
    <button class="button" @onclick="@base.OnBack">Back</button>
</div>

<Message Error=@base.Error StrInfo=@StrInfo> </Message>

@code {
    [Parameter]
    public string Id { get; set; } = "";
    CarViewModel car = new CarViewModel();
    protected override async Task OnInitializedAsync()
    {
        car = await API.GetPersonById(Id);
    }
    protected async Task Save()
    {
        bool b = await API.UpdateCar(car);
        if (b)
            await base.OnOk("Updated successfully");
        else 
            await base.OnError("Save Failed !!");
    }
}
